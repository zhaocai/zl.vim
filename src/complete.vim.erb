" =============== ============================================================
" Name           : compete.vim
" Synopsis       : complete helper
" Author         : Zhao Cai <caizhaoff@gmail.com>
" HomePage       : https://github.com/zhaocai/zl.vim
" Version        : 0.1
" Date Created   : Sat 03 Sep 2011 03:54:00 PM EDT
" Last Modified  : Tue 09 Apr 2013 09:55:04 AM EDT
" Tag            : [ vim, complete ]
" Copyright      : Â© 2012 by Zhao Cai,
"                  Released under current GPL license.
" =============== ============================================================







" ============================================================================
" Complete Words:                                                         [[[1
" ============================================================================
function! <%=zl%>#complete#get_prev_cur(cmdline) "                             [[[2
    "--------- ----------------------------------------------------
    " Desc    : previous and current word for input() completion
    "
    " Args    : cmdline
    " Return  : [prev, cur]
    " Raise   :
    "
    " Example : >
    "   fun! xxx#completion(arglead, cmdline, cursorpos)
    "       let [prev, cur] = <%=zl%>#complete#get_prev_cur(a:arglead)
    "       return map(filter(xxxwordslist,
    "              \ 'cur == "" ? 1 : stridx(v:val, cur) == 0' ),
    "              \ 'prev == "" ? v:val : join([prev, v:val])')
    "   endf
    "--------- -----------------------------------------------------

    if a:cmdline =~# '\s\+$'
        return [a:cmdline, '']
    endif

    let words = split(a:cmdline)
    return [join(words[0:-2]), get(words, -1, "")]
endfunction

" ============================================================================
" Modeline:                                                               [[[1
" ============================================================================
" vim: set ft=vim ts=4 sw=4 tw=78 fdm=syntax fmr=[[[,]]] fdl=1 :
"
